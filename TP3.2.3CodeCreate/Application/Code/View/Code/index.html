<!DOCTYPE html>
<html>
<head>
	<title>基于THINKPHP3.2的代码自动生成</title>
	<meta charset="utf-8">
	<style>
		/* webkit, opera, IE9 */
		::selection { background:yellow; color:teal;}
		/* mozilla firefox */
		::-moz-selection { background:yellow;color:teal; }
		body{
			background: #f6f6f6;
		}
		
		table{
			border: 1px solid teal;
			border-collapse: collapse;
		}
		tr,td{
			border: 1px solid teal;
		}
	</style>
</head>
<body>
	<form action="" method="GET">
		<input type="hidden" name="m" value="<?php echo MODULE_NAME?>">
		<input type="hidden" name="c" value="<?php echo CONTROLLER_NAME?>">
		<input type="hidden" name="a" value="<?php echo ACTION_NAME?>">
		<table style="width: 820px;margin: 0 auto;">
			<center><h1>基于THINKPHP3.2的代码自动生成</h1></center>
		<tr>
			<td><div style='margin-left:30px;'>表格名称：</div></td>
			<td>
				<input type="text" name="table_name" value="<?php echo $GLOBALS['table_name']?>" style="text-align: center;text-transform: Lowercase;margin-left:30px;" />&nbsp;(不用加前缀,全小写：article)
			</td>
		</tr>
		<tr>
			<td><div style='margin-left:30px;'>生成后台模块位置：</div></td>
			<td>
				<input type="text" name="admin_module_name" value="<?php echo I('get.admin_module_name')?>" style="text-align: center;text-transform: capitalize;margin-left:30px;" />&nbsp;(用于生成代码位置,首字母大写：Admin)
			</td>
		</tr>
		<tr>
			<td><div style='margin-left:30px;'>生成前台模块位置：</div></td>
			<td>
				<input type="text" name="home_module_name" value="<?php echo I('get.home_module_name')?>" style="text-align: center;text-transform: capitalize;margin-left:30px;" />&nbsp;(用于生成代码位置,首字母大写：Home)
			</td>
		</tr>
		<tr>
			<td><div style='margin-left:30px;'>主题(可选,未完成)：</div></td>
			<td>
				<input type="text" name="t" value="<?php echo I('get.t')?>" style="text-align: center;text-transform: capitalize;margin-left:30px;" />&nbsp;(主题位置,首字母大写：Default)
			</td>
		</tr>
		<tr>
			<td>
				<div style='margin-left:30px;margin-right: 30px;'>
				字段映射(可选)：<br />
				For example: <br />
				art_id@id,art_content@content
				</div>
			</td>
			<td>
				<textarea  style='margin-left:30px;' name="map" cols="60" rows="4" placeholder="art_id@id,art_content@content结尾不用加逗号，"><?php echo $_GET['map'];?></textarea>
			</td>
		</tr>
		<tr>
			<td style="text-align: center;">
				<input type="submit" value="生成配置文件" name="config" />
			</td>
			<td style="text-align: center;">
				<input type="submit" value="生成代码" name="create" />
			</td>
		</tr>
		<tr>
			<td colspan="2">
				<br />
				<div style="width: 750px;margin-left:30px;">
					修改（（【生成配置文件】和【生成代码】）的配置文件）位于:
					<br />
					<div style='margin-left:30px;'>
						<font style="text-decoration: underline;color: blue"><?php echo SCRIPT_FILENAME.substr(CODE_PATH, 2).'Code_template/config.php';?></font>
					</div>
					<font color="red">生成的配置文件和代码会覆盖原来的文件，谨慎操作！</font>
				</div>
				<br />
			</td>
		</tr>
		<?php if($rst):?>
		<tr>
			<td colspan="2">
				<div style="width: 750px;margin-left:30px;">
					**** 用时：<?php echo $time;?> ****
				</div>
				<?php foreach($rst as $k=>$v):?>
				<br />
				<div style="width: 750px;margin-left:30px;">
					**** <?php echo $k;?> ****<br />
					<?php echo $v['tip'];?>:<br />
					<font color="<?php echo $v['status'] ? 'teal' : 'red';?>">
						<div style='margin-left:30px;'>
							<?php echo $v['cnt'];?>
						</div>
					</font>
				</div>
				<br />
			<?php endforeach;?>
			</td>
		</tr>	
		<?php endif;?>	

		</table>
	</form>
</body>
</html>